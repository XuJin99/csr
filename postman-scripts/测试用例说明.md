# CSR API 测试用例说明

## 测试用例分类

### 1. 认证测试用例

#### 1.1 用户注册测试
- **测试目标**: 验证用户注册功能
- **前置条件**: 无
- **测试步骤**:
  1. 发送用户注册请求
  2. 验证响应状态码为200
  3. 验证响应消息为"User registered successfully"
- **预期结果**: 用户成功注册
- **测试数据**:
  ```json
  {
    "username": "testuser",
    "password": "password123",
    "nickname": "测试用户",
    "realName": "张三",
    "gender": "MALE"
  }
  ```

#### 1.2 管理员注册测试
- **测试目标**: 验证管理员注册功能
- **前置条件**: 无
- **测试步骤**:
  1. 发送管理员注册请求
  2. 验证响应状态码为200
  3. 验证响应消息为"Admin user registered successfully"
- **预期结果**: 管理员账户成功创建

#### 1.3 用户登录测试
- **测试目标**: 验证用户登录功能
- **前置条件**: 用户已注册
- **测试步骤**:
  1. 发送登录请求
  2. 验证响应状态码为200
  3. 验证返回accessToken和refreshToken
  4. 验证自动设置环境变量
- **预期结果**: 登录成功，获取到有效Token

#### 1.4 Token刷新测试
- **测试目标**: 验证Token刷新功能
- **前置条件**: 用户已登录，有有效的refreshToken
- **测试步骤**:
  1. 发送Token刷新请求
  2. 验证响应状态码为200
  3. 验证返回新的accessToken
- **预期结果**: 成功获取新的访问令牌

#### 1.5 用户登出测试
- **测试目标**: 验证用户登出功能
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 发送登出请求
  2. 验证响应状态码为200
  3. 验证响应消息为"Logged out successfully"
- **预期结果**: 成功登出，Token失效

### 2. 用户管理测试用例

#### 2.1 获取用户列表测试（管理员）
- **测试目标**: 验证管理员获取用户列表功能
- **前置条件**: 管理员已登录
- **测试步骤**:
  1. 发送获取用户列表请求
  2. 验证响应状态码为200
  3. 验证返回用户列表数据
- **预期结果**: 成功获取用户列表

#### 2.2 获取用户详情测试
- **测试目标**: 验证获取用户详情功能
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 发送获取用户详情请求
  2. 验证响应状态码为200
  3. 验证返回用户详细信息
- **预期结果**: 成功获取用户详情

#### 2.3 更新个人资料测试
- **测试目标**: 验证用户更新个人资料功能
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 发送更新个人资料请求
  2. 验证响应状态码为200
  3. 验证响应消息为"更新成功"
- **预期结果**: 个人资料更新成功

#### 2.4 重置密码测试
- **测试目标**: 验证密码重置功能
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 发送密码重置请求
  2. 验证响应状态码为200
  3. 验证响应消息为"Password reset successful."
- **预期结果**: 密码重置成功

#### 2.5 批量删除用户测试（管理员）
- **测试目标**: 验证管理员批量删除用户功能
- **前置条件**: 管理员已登录
- **测试步骤**:
  1. 发送批量删除用户请求
  2. 验证响应状态码为200
  3. 验证响应消息为"Batch deletion success."
- **预期结果**: 批量删除成功

### 3. 事件管理测试用例

#### 3.1 获取事件列表测试
- **测试目标**: 验证获取事件列表功能
- **前置条件**: 无
- **测试步骤**:
  1. 发送获取事件列表请求
  2. 验证响应状态码为200
  3. 验证返回事件列表数据
- **预期结果**: 成功获取事件列表

#### 3.2 获取事件详情测试
- **测试目标**: 验证获取事件详情功能
- **前置条件**: 事件已存在
- **测试步骤**:
  1. 发送获取事件详情请求
  2. 验证响应状态码为200
  3. 验证返回事件详细信息
- **预期结果**: 成功获取事件详情

#### 3.3 创建事件测试
- **测试目标**: 验证创建事件功能
- **前置条件**: 无
- **测试步骤**:
  1. 发送创建事件请求
  2. 验证响应状态码为200
  3. 验证响应消息为"事件创建成功"
- **预期结果**: 事件创建成功

#### 3.4 更新事件测试
- **测试目标**: 验证更新事件功能
- **前置条件**: 事件已存在
- **测试步骤**:
  1. 发送更新事件请求
  2. 验证响应状态码为200
  3. 验证响应消息为"更新事件成功"
- **预期结果**: 事件更新成功

#### 3.5 删除事件测试
- **测试目标**: 验证删除事件功能
- **前置条件**: 事件已存在
- **测试步骤**:
  1. 发送删除事件请求
  2. 验证响应状态码为200
  3. 验证响应消息为"删除成功"
- **预期结果**: 事件删除成功

### 4. 活动管理测试用例

#### 4.1 获取活动列表测试
- **测试目标**: 验证获取活动列表功能
- **前置条件**: 事件已存在
- **测试步骤**:
  1. 发送获取活动列表请求
  2. 验证响应状态码为200
  3. 验证返回活动列表数据
- **预期结果**: 成功获取活动列表

#### 4.2 获取活动详情测试
- **测试目标**: 验证获取活动详情功能
- **前置条件**: 活动已存在
- **测试步骤**:
  1. 发送获取活动详情请求
  2. 验证响应状态码为200
  3. 验证返回活动详细信息
- **预期结果**: 成功获取活动详情

#### 4.3 创建活动测试
- **测试目标**: 验证创建活动功能
- **前置条件**: 事件已存在
- **测试步骤**:
  1. 发送创建活动请求
  2. 验证响应状态码为200
  3. 验证返回活动ID
- **预期结果**: 活动创建成功

#### 4.4 报名活动测试
- **测试目标**: 验证用户报名活动功能
- **前置条件**: 用户已登录，活动已存在
- **测试步骤**:
  1. 发送报名活动请求
  2. 验证响应状态码为200
  3. 验证响应消息为"Signup successful"
- **预期结果**: 活动报名成功

#### 4.5 退出活动测试
- **测试目标**: 验证用户退出活动功能
- **前置条件**: 用户已报名活动
- **测试步骤**:
  1. 发送退出活动请求
  2. 验证响应状态码为200
  3. 验证响应消息为"Withdraw successful"
- **预期结果**: 活动退出成功

### 5. 模板管理测试用例

#### 5.1 获取模板列表测试
- **测试目标**: 验证获取模板列表功能
- **前置条件**: 无
- **测试步骤**:
  1. 发送获取模板列表请求
  2. 验证响应状态码为200
  3. 验证返回模板数组数据
- **预期结果**: 成功获取模板列表

#### 5.2 搜索模板测试
- **测试目标**: 验证按名称搜索模板功能
- **前置条件**: 模板数据已存在
- **测试步骤**:
  1. 发送搜索模板请求（带name参数）
  2. 验证响应状态码为200
  3. 验证返回的模板名称包含搜索关键词
- **预期结果**: 成功搜索到匹配的模板

### 6. 权限测试用例

#### 5.1 管理员权限测试
- **测试目标**: 验证管理员专用接口访问权限
- **前置条件**: 管理员已登录
- **测试步骤**:
  1. 访问管理员专用接口
  2. 验证响应状态码为200
- **预期结果**: 成功访问管理员功能

#### 5.2 普通用户权限测试
- **测试目标**: 验证普通用户权限限制
- **前置条件**: 普通用户已登录
- **测试步骤**:
  1. 尝试访问管理员专用接口
  2. 验证响应状态码为403
- **预期结果**: 权限不足，访问被拒绝

#### 5.3 未认证访问测试
- **测试目标**: 验证未认证用户的访问限制
- **前置条件**: 无
- **测试步骤**:
  1. 不携带Token访问需要认证的接口
  2. 验证响应状态码为401
- **预期结果**: 未认证，访问被拒绝

## 测试执行顺序建议

### 基础功能测试
1. 用户注册
2. 用户登录
3. 获取用户详情
4. 更新个人资料

### 事件管理测试
1. 创建事件
2. 获取事件列表
3. 获取事件详情
4. 更新事件
5. 删除事件

### 活动管理测试
1. 创建活动
2. 获取活动列表
3. 获取活动详情
4. 报名活动
5. 退出活动

### 管理员功能测试
1. 管理员注册
2. 管理员登录
3. 获取用户列表
4. 批量删除用户

### 模板管理测试
1. 获取模板列表
2. 搜索模板

### 权限测试
1. 管理员权限测试
2. 普通用户权限测试
3. 未认证访问测试

## 测试数据准备

### 测试用户数据
```json
{
  "普通用户": {
    "username": "testuser",
    "password": "password123",
    "nickname": "测试用户",
    "realName": "张三",
    "gender": "MALE"
  },
  "管理员": {
    "username": "admin",
    "password": "admin123",
    "nickname": "管理员",
    "realName": "管理员",
    "gender": "MALE"
  }
}
```

### 测试事件数据
```json
{
  "name": "企业社会责任活动",
  "startTime": "2024-12-01 09:00",
  "endTime": "2024-12-01 18:00",
  "icon": "https://example.com/icon.png",
  "description": "这是一个企业社会责任活动",
  "isDisplay": true,
  "visibleLocations": ["北京", "上海", "广州"],
  "visibleRoles": ["USER", "ADMIN"]
}
```

### 测试活动数据
```json
{
  "name": "志愿者服务活动",
  "description": "为社区提供志愿者服务",
  "startTime": "2024-12-01 10:00",
  "endTime": "2024-12-01 16:00",
  "status": "ACTIVE",
  "eventId": 1
}
```

### 测试模板数据
```json
{
  "id": 1,
  "name": "志愿者服务模板",
  "totalTime": 120,
  "fileLink": "https://example.com/template.pdf",
  "detail": "{\"description\": \"志愿者服务活动模板\", \"requirements\": [\"年龄18岁以上\", \"身体健康\"]}"
}
```

## 测试报告模板

### 测试执行结果
- **测试用例总数**: XX
- **通过**: XX
- **失败**: XX
- **跳过**: XX
- **通过率**: XX%

### 问题记录
1. **问题描述**: 
2. **重现步骤**: 
3. **预期结果**: 
4. **实际结果**: 
5. **严重程度**: 
6. **状态**: 

### 建议改进
1. 
2. 
3. 